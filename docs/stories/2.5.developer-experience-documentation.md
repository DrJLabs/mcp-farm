# Story 2.5: Developer Experience Documentation

Status: Draft

## Story

**As a** product owner onboarding new contributors,
**I want** up-to-date documentation describing the lint, format, type check, and test workflow,
**so that** developers can self-serve the baseline commands and avoid CI surprises.

Dependencies: Stories 2.1–2.4 (tooling implemented and CI in place).

## Acceptance Criteria

1. `docs/validation.md` (or new `docs/testing.md`) includes sections covering Ruff (lint + format), Prettier, ty, and pytest commands with step-by-step instructions.
2. README.md contains a quickstart snippet (<10 lines) summarizing the primary commands (`uvx ruff format`, `uvx ruff check`, `uv run ty check`, `uv run pytest --cov --cov-fail-under=80`) and calls out `pytest --markers integration` for slower smoke coverage.
3. Documentation references GitHub issue #5, links to workflow (`.github/workflows/ci.yml`), and notes that `setup-uv@v6` handles caching by default (with a pointer to `uv cache prune --ci`).
4. Onboarding checklist (if present in `onboarding-chatgpt.md` or similar) is updated to include running pre-commit hooks and the full validation suite.
5. Docs reviewed by QA or PM; a confirmation comment is added to Issue #5 with links to updated sections.
6. A "Tooling status" note in docs clarifies Ty's preview maturity and alternative lint/type commands if ty regresses.

Evidence: Link to diff or published docs demonstrating updates; screenshot optional for onboarding doc.

## Tasks / Subtasks

- [ ] Update validation/testing docs
  - [ ] Add or revise section covering command usage, expected outputs, and failure recovery tips.
  - [ ] Include note on installing pre-commit hooks (`uvx pre-commit install`).
- [ ] README quickstart
  - [ ] Insert quickstart snippet; ensure `toc` unaffected.
  - [ ] Mention `pytest --markers` for discovering integration tests.
- [ ] Onboarding checklist update
  - [ ] Modify `docs/onboarding-chatgpt.md` (or relevant doc) to include new tooling steps.
- [ ] Cross-linking
  - [ ] Add references to Issue #5 and `docs/issues/testing-tooling-baseline.md` if relocated.
- [ ] Stakeholder review
  - [ ] Request QA/PM sign-off and post confirmation comment in Issue #5.
  - [ ] Capture "what to do if uv cache grows" guidance (link to workflow story) for self-service troubleshooting.
  - [ ] Add table mapping quick commands to underlying Ruff/Ty/pytest docs.

## Dev Notes

- Keep command blocks short; prefer fenced code blocks with explanatory bullet list.
- Include troubleshooting tips (e.g., clearing `~/.cache/uv` if sync fails).
- Mention Node version requirement for Prettier (≥18) to mitigate OPS-205 risk.
- Link to uv cache best practices and Ty preview caveats so new contributors understand when to fall back to Ruff-only checks.

### Rationale — 2025-09-16

- README/validation updates now reference `setup-uv@v6` caching defaults and the recommended pruning flag from GitHub's April 2025 guidance.citeturn4search5turn4search6
- Coverage and quickstart instructions add `--cov-fail-under=80` plus marker discovery to align with the refreshed testing story and Coverage.py recommendations.citeturn4search2turn4search4
- Docs explicitly note Ty's preview status and fallback options in line with Astral's July 2025 update, preventing onboarding surprises when the type checker changes.citeturn1search4

### References

- Story Seed S5: docs/stories/SEED-epic-2-testing-foundations.md#s5--developer-experience-documentation
- Existing docs: docs/validation.md, docs/onboarding-chatgpt.md, README.md
- Issue #5: https://github.com/DrJLabs/mcp-farm/issues/5

## Testing

- Manual review: ensure commands copy/paste successfully on local environment.
- Optional: run `markdownlint` or Prettier to confirm formatting.

## QA Results

- Risk Assessment: docs/qa/assessments/2.5-risk-20250916.md (Quinn — 2025-09-16)
- Test Design: docs/qa/assessments/2.5-test-design-20250916.md (Quinn — 2025-09-16)
- PO Validation: Pending — capture once documentation updated and reviewed.

## Change Log

| Date       | Version | Description                                                 | Author |
| ---------- | ------- | ----------------------------------------------------------- | ------ |
| 2025-09-16 | 0.2     | Analyst refresh: documentation aligns with 2025 tooling UX  | Analyst |
| 2025-09-16 | 0.1     | Initial draft of Story 2.5                                   | SM     |
