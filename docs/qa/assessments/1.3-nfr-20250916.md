# QA NFR Assessment â€” Story 1.3: PRM and 401 Hint

Date: 2025-09-16
Story: docs/stories/1.3.prm-and-401-hint.md
Scope: Gate A (PRM publication + unauth 401 enforcement)

## Evaluated NFRs

| NFR | Status | Evidence / Notes |
| --- | ------ | ---------------- |
| Security | PASS | 401 path enforces Bearer header with PRM hint; tests `test_unauthenticated_mcp_returns_401_with_prm_hint`, `test_health_is_public_when_auth_enabled` confirm enforcement. PRM response excludes secrets and maintains 60s cache. Logging remains free of token disclosure per security-controls.md guidance. |
| Performance | PASS | PRM handler returns static JSON with cache-control 60s; no additional I/O. Evidence via tests and curl shows instantaneous responses (TestClient). No regression risk flagged. |
| Reliability | PASS | Graceful fallback when issuer env absent (`test_server_without_issuer_keeps_auth_disabled`), public health remains accessible for monitoring. PRM evidence stored for reproducibility. |
| Maintainability | PASS | New auth provider encapsulated, tests added for core behaviors, documentation/evidence captured. No new dependencies; utilities centralized under `tests/_utils.py` for reuse. |

Quality Score: 100

## Gate YAML Snippet
```yaml
nfr_validation:
  _assessed: [security, performance, reliability, maintainability]
  security:
    status: PASS
    notes: '401 enforcement + PRM metadata validated via tests and evidence.'
  performance:
    status: PASS
    notes: 'Static JSON response with cache-control; no additional latency sources.'
  reliability:
    status: PASS
    notes: 'Issuer toggle fallback verified; health route remains public.'
  maintainability:
    status: PASS
    notes: 'Tests and utilities updated; no extra dependencies or config drift.'
```

## Observations & Follow-ups
- JWKS retrieval still deferred to S4 (JWT verification); ensure latency/security checks then.
- Consider automating curl evidence collection in CI for continuous assurance.

