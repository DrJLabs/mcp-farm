# Risk Profile: Story 1.1 — Bootstrap Env and Healthcheck

Date: 2025-09-15
Reviewer: Quinn (Test Architect)

## Executive Summary
- Total Risks Identified: 6
- Critical Risks: 0
- High Risks: 1
- Risk Score: 88/100 (calculated)

This story is foundational and low complexity. Main exposure is operational misconfiguration and accidental external exposure of a non-authenticated health endpoint. Security and performance risks are minimal at this stage; they increase in later stories (S3–S5).

## Risk Distribution
- Security: 2 (0 critical)
- Performance: 1 (0 critical)
- Data: 0
- Business: 0
- Operational: 3 (0 critical)

## Detailed Risk Register

### TECH-001: Env defaults misconfigured (bind/port)
- Probability: Medium (2)
- Impact: Medium (2)
- Score: 4 (Medium)
- Description: Incorrect `BIND_HOST`/`BIND_PORT` prevents local run or collides with occupied ports.
- Mitigation:
  - Document defaults in `.env.example`; validate at startup; fail-fast with helpful error.
  - Add quick note in README/onboarding for port changes.
- Testing Focus: Launch script verifies server binds and responds to `/healthz`.

### OPS-001: Health endpoint not deployed or wrong shape
- Probability: Medium (2)
- Impact: Medium (2)
- Score: 4 (Medium)
- Description: Missing route or wrong JSON breaks downstream validation and S2.
- Mitigation:
  - Unit test for handler returns `{ "ok": true }` and `Content-Type: application/json`.
  - Validation step in CI uses curl/jq.
- Testing Focus: Contract test for JSON body and status 200.

### OPS-002: Evidence not captured in PR
- Probability: Medium (2)
- Impact: Low (1)
- Score: 2 (Low)
- Description: Without curl output in PR, Gate A prep loses traceability.
- Mitigation: Add checklist step to paste curl output in PR description.
- Testing Focus: CI job artifact to store curl output.

### SEC-001: Health endpoint exposed externally without rate limits
- Probability: Low (1)
- Impact: Medium (2)
- Score: 2 (Low)
- Description: Unauthenticated health could be probed; low sensitivity but could aid recon.
- Mitigation: Restrict health exposure via Traefik/ingress to internal or add simple allowlist. Defer to S2 routing decisions.
- Intent (S1): `/healthz` may be reachable on localhost only; external exposure is deferred to S2 ingress decisions.
- Testing Focus: Post-S2, verify health path exposure as intended (internal/external).

### PERF-001: Health handler adds slow dependencies
- Probability: Low (1)
- Impact: Medium (2)
- Score: 2 (Low)
- Description: Health doing IO or database calls increases latency.
- Mitigation: Keep health pure/static; add lightweight uptime/ok only.
- Testing Focus: Simple latency check (<50ms in dev) optional.

### OPS-003: Divergence between sample server and docs
- Probability: Medium (2)
- Impact: Medium (2)
- Score: 4 (Medium)
- Description: Route/response drifts from docs/validation.
- Mitigation: Treat docs as source of truth; code review item to compare outputs.
- Testing Focus: Scripted smoke vs docs expectations.

## Risk-Based Testing Strategy
- Priority 1: Contract tests for `/healthz` (status 200, JSON `{"ok": true}`, content-type).
- Priority 2: Startup validation for env parsing with clear errors.
- Priority 3: Evidence capture in CI and PR template checklist.

## Risk Acceptance Criteria
- Must Fix Before Merge: TECH-001, OPS-001.
- Can Defer: SEC-001 (until S2), PERF-001.

## Monitoring Requirements (post-merge optional)
- Log a single JSON line on startup summarizing bind host/port (no secrets).
- Basic access logs for health requests.

## Story Hook
Risk profile: docs/qa/assessments/1.1-risk-20250915.md
