# Risk Profile: Story 2.4 — CI Workflow Enforcement

Date: 2025-09-16
Reviewer: Quinn (Test Architect)

## Executive Summary
- Total Risks Identified: 7
- Critical Risks: 0
- High Risks: 3
- Risk Score: 88/100 (calculated)

Workflow correctness is essential—misconfigured steps or missing caching can slow development and mask failures. Ensuring reproducibility and failure evidence capture are top priorities.

## Risk Distribution
- Security: 0
- Performance: 3 (1 high)
- Data: 0
- Business: 1
- Operational: 3 (2 high)

## Detailed Risk Register

### OPS-401: Workflow skips required step (lint/type/test)
- Probability: Medium (2)
- Impact: High (3)
- Score: 6 (High)
- Description: YAML misconfiguration or conditional may skip Ruff or pytest.
- Mitigation: Add explicit steps with `if: always()` where needed; include workflow test branch.
- Testing Focus: Inspect logs ensuring all steps executed.

### OPS-402: Cache key mismatch leading to stale dependencies
- Probability: Medium (2)
- Impact: High (3)
- Score: 6 (High)
- Description: Incorrect key prevents cache reuse or returns stale env.
- Mitigation: Use hash of `uv.lock` and Python version.
- Testing Focus: Evaluate cache hit rate metrics.

### PERF-401: Workflow runtime exceeds acceptable threshold (>10 min)
- Probability: Medium (2)
- Impact: Medium (2)
- Score: 4 (Medium)
- Mitigation: Cache dependencies, separate jobs once stable.
- Testing Focus: Record runtime baseline.

### OPS-403: Coverage artifacts missing or corrupted
- Probability: Medium (2)
- Impact: Medium (2)
- Score: 4 (Medium)
- Mitigation: Validate artifact upload step; include verification in acceptance.

### BUS-401: Failure demonstration skipped, stakeholders lack confidence
- Probability: Medium (2)
- Impact: Medium (2)
- Score: 4 (Medium)
- Mitigation: Acceptance requires failure run link.

### OPS-404: Workflow triggers on unexpected branches or misses main
- Probability: Low (1)
- Impact: Medium (2)
- Score: 2 (Low)
- Mitigation: Confirm `on` block includes `push` to main and PR.

### PERF-402: uv cache grows unbounded, causing storage issues
- Probability: Low (1)
- Impact: Medium (2)
- Score: 2 (Low)
- Mitigation: Add cache size monitoring; periodic bust.

## Risk-Based Testing Strategy
- Priority 1: Validate workflow executes all steps in correct order on test branch.
- Priority 2: Confirm cache utilization and artifact upload in run logs.
- Priority 3: Provide failure demonstration by intentionally breaking formatting.

## Risk Acceptance Criteria
- Must Fix Before Merge: OPS-401, OPS-402.
- Can Defer With Ticket: PERF-402.

## Monitoring Requirements (post-merge optional)
- Track workflow duration and cache hit metrics in GitHub Actions insights.
- Audit coverage artifact size to ensure manageable footprint.

## Story Hook
Risk profile: docs/qa/assessments/2.4-risk-20250916.md
